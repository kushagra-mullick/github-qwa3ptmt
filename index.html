<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#000000">
    <title>Locnix.ai</title>
    <meta name="title" content="Locnix.ai - Location-Based Task Management App">
    <meta name="description" content="AI-powered location-based task management. Get smart reminders, contextual suggestions, and intelligent task organization.">
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" href="icons/icon-192x192.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    
    <!-- Icons -->
    <link href="https://unpkg.com/feather-icons" rel="stylesheet">
  </head>
  <body>
    <nav class="navbar">
      <div class="nav-logo">
        <img src="locnix-logo.png" alt="Locnix.ai">
        <span>Locnix.ai</span>
      </div>
      <div class="nav-links">
        <a href="#">Tasks</a>
        <a href="#">Bookmarks</a>
      </div>
    </nav>

    <div class="container">
      <div class="hero-text">
        <h1>Millions of locations.</h1>
        <h2>Free on Locnix.ai</h2>
      </div>

      <div class="cta-buttons">
        <button class="primary-btn">Sign up free</button>
        
        <button class="secondary-btn">
          <img src="phone-icon.png" alt="Phone">
          Continue with phone number
        </button>
        
        <button class="secondary-btn">
          <img src="google-icon.png" alt="Google">
          Continue with Google
        </button>
        
        <button class="secondary-btn">
          <img src="facebook-icon.png" alt="Facebook">
          Continue with Facebook
        </button>
      </div>

      <div class="login-link">
        <a href="#">Log in</a>
      </div>
    </div>

    <!-- Fixed Top Navigation -->
    <nav class="navbar">
      <div class="navbar-container">
        <a href="/" class="navbar-brand">
          <i data-feather="map-pin"></i>
          Locnix.ai
        </a>
        <div class="navbar-menu">
          <a href="#" class="navbar-link" id="tasks-link">Tasks</a>
          <a href="#" class="navbar-link" id="bookmarks-link">Bookmarks</a>
          <div id="user-menu"></div>
        </div>
        <button class="btn btn-outline" id="menu-toggle" aria-label="Toggle menu">
          <i data-feather="menu"></i>
        </button>
      </div>
    </nav>

    <main class="main-container">
      <!-- Auth Section -->
      <div class="auth-section" id="auth-section">
        <div class="card animate-slide-up">
          <h2 class="text-center mb-lg">Welcome to Locnix.ai</h2>
          <p class="text-center text-secondary mb-lg">AI-powered location-based task management</p>
          <form id="auth-form" class="form">
            <div class="form-group">
              <label for="email" class="form-label">Email</label>
              <input type="email" id="email" class="form-input" required />
            </div>
            <div class="form-group">
              <label for="password" class="form-label">Password</label>
              <input type="password" id="password" class="form-input" required />
            </div>
            <button type="submit" id="auth-button" class="btn btn-primary w-full">
              Sign In
            </button>
            <button type="button" id="toggle-auth" class="btn btn-outline w-full">
              Switch to Sign Up
            </button>
            <button type="button" id="guest-access" class="btn btn-secondary w-full">
              Continue as Guest
            </button>
          </form>
        </div>
      </div>

      <!-- App Section -->
      <div class="app-section" id="app-section" style="display: none;">
        <!-- AI Features Section -->
        <section class="ai-features animate-fade-in">
          <div class="feature-cards">
            <div class="feature-card">
              <i data-feather="map-pin"></i>
              <h3>Location-aware Reminders</h3>
              <p>Get smart reminders based on your location</p>
            </div>
            <div class="feature-card">
              <i data-feather="tag"></i>
              <h3>Smart Categorization</h3>
              <p>AI automatically categorizes your tasks</p>
            </div>
            <div class="feature-card">
              <i data-feather="trending-up"></i>
              <h3>Task Analytics</h3>
              <p>Insights to optimize your productivity</p>
            </div>
          </div>
        </section>

        <!-- Task Creation -->
        <section class="card task-creation animate-slide-up">
          <h2 class="section-title">Create New Task</h2>
          <div class="form-group">
            <label for="task" class="form-label">Task Description</label>
            <input type="text" id="task" class="form-input" placeholder="What needs to be done? Try 'Remind me to buy groceries when I'm near the store'" />
          </div>
          
          <div class="form-group">
            <label class="form-label">Location</label>
            <div class="location-search">
              <input 
                type="text" 
                id="location-search" 
                class="form-input" 
                placeholder="Search for a location..." 
              />
              <div id="search-results" class="search-results"></div>
            </div>
            <div class="location-actions">
              <button onclick="getCurrentLocation()" class="btn btn-outline">
                <i data-feather="crosshair"></i>
                Current Location
              </button>
              <button onclick="toggleMap()" class="btn btn-outline">
                <i data-feather="map"></i>
                Select on Map
              </button>
            </div>
            <input type="text" id="location" class="form-input" readonly />
          </div>

          <div class="form-group">
            <label for="reminder-type" class="form-label">Reminder Type</label>
            <select id="reminder-type" class="form-select">
              <option value="time">Time-based</option>
              <option value="location">Location-based</option>
              <option value="smart">Smart (AI-suggested)</option>
            </select>
          </div>

          <div class="form-group" id="time-reminder">
            <label for="reminder-time" class="form-label">Set Time Reminder</label>
            <select id="reminder-time" class="reminder-select">
              <option value="">No reminder</option>
              <option value="1h">In 1 hour</option>
              <option value="2h">In 2 hours</option>
              <option value="4h">In 4 hours</option>
              <option value="1d">In 1 day</option>
              <option value="2d">In 2 days</option>
              <option value="1w">In 1 week</option>
            </select>
          </div>

          <div class="form-group" id="location-reminder" style="display: none;">
            <label for="reminder-radius" class="form-label">Trigger Distance (meters)</label>
            <input type="range" id="reminder-radius" min="100" max="1000" step="100" value="500" class="range-input" />
            <span id="radius-value">500m</span>
          </div>

          <button onclick="addTask()" class="btn btn-primary">
            <i data-feather="plus"></i>
            Add Task
          </button>
        </section>

        <!-- Map Section -->
        <div id="map" class="map-container"></div>

        <!-- Task Management -->
        <section class="card tasks-section animate-slide-up">
          <div class="tasks-header">
            <h2 class="section-title">Tasks</h2>
            <div class="ai-insights">
              <i data-feather="trending-up"></i>
              <span id="ai-suggestion">AI analyzing your task patterns...</span>
            </div>
          </div>
          
          <div class="task-filters">
            <button onclick="filterTasks('all')" class="btn btn-outline active">All</button>
            <button onclick="filterTasks('active')" class="btn btn-outline">Active</button>
            <button onclick="filterTasks('completed')" class="btn btn-outline">Completed</button>
          </div>
          
          <div class="task-categories">
            <span class="category-tag" data-category="work">Work</span>
            <span class="category-tag" data-category="errands">Errands</span>
            <span class="category-tag" data-category="personal">Personal</span>
          </div>
          
          <ul id="tasks" class="tasks-list"></ul>
        </section>

        <!-- Bookmarks Section -->
        <section class="card bookmarks-section animate-slide-up">
          <h2 class="section-title">Saved Locations</h2>
          <div class="form-group">
            <input 
              type="text" 
              id="bookmark-name" 
              class="form-input" 
              placeholder="Name this location (e.g., Home, Work)" 
            />
            <button onclick="addBookmark()" class="btn btn-secondary">
              <i data-feather="bookmark"></i>
              Save Location
            </button>
          </div>
          <ul id="bookmarks-list" class="bookmarks-list"></ul>
        </section>
      </div>
    </main>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>
    <script type="module" src="/src/main.js"></script>
    <script>
      // Initialize Feather Icons
      document.addEventListener('DOMContentLoaded', () => {
        feather.replace();
      });

      // Register the service worker
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/service-worker.js')
            .then((registration) => {
              console.log('Service Worker registered with scope:', registration.scope);
            })
            .catch((error) => {
              console.log('Service Worker registration failed:', error);
            });
        });
      }
    </script>
  </body>
</html>
